#!/bin/bash

export OUTDIR_SRC="Export/neko/obj/"
export OUTDIR_DST="../../"

rm ../*.n
rm ../*.json

################################################################################
echo "> building: VimStudioClient & VimStudioServer" ###########################
################################################################################

cd VimStudioSys

rm -rf Export
haxe build.hxml

cp $OUTDIR_SRC*".n" $OUTDIR_DST
cp $OUTDIR_SRC*".json" $OUTDIR_DST

################################################################################
echo "   done." ################################################################
################################################################################
echo "> building: ChooseName" ##################################################
################################################################################

cd ../ChooseName

rm -rf Export
lime build neko

cp $OUTDIR_SRC"ApplicationMain.n" $OUTDIR_DST"ChooseName.n"

################################################################################
echo "   done." ################################################################
################################################################################
echo "> building: SearchAndReplace" ############################################
################################################################################

cd ../SearchAndReplace

rm -rf Export
lime build neko

cp $OUTDIR_SRC"ApplicationMain.n" $OUTDIR_DST"SearchAndReplace.n"

################################################################################
echo "   done." ################################################################
################################################################################
echo "> building: ChooseTemplate" ##############################################
################################################################################

cd ../ChooseTemplate

rm -rf Export
lime build neko

cp $OUTDIR_SRC"ApplicationMain.n" $OUTDIR_DST"ChooseTemplate.n"

################################################################################
echo "   done." ################################################################
################################################################################
echo "> building: ContextMenu" #################################################
################################################################################

cd ../ContextMenu

rm -rf Export
lime build neko

cp $OUTDIR_SRC"ApplicationMain.n" $OUTDIR_DST"ContextMenu.n"

################################################################################
echo "   done." ################################################################
################################################################################
